<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>RPG Savage V4</title>

<style>
/* ===== RESET ===== */
html, body {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  background: #111;
  color: #fff;
  font-family: monospace;
  overflow: hidden;
}

/* ===== LAYOUT ===== */
#game {
  width: 100vw;
  height: 100vh;
  display: flex;
}

#battle {
  flex: 2;
  position: relative;
  background: linear-gradient(#222, #000);
  overflow: hidden;
}

#ui {
  flex: 1;
  background: #000;
  padding: 10px;
  display: flex;
  flex-direction: column;
}

/* ===== SPRITES ===== */
#player, #enemy {
  width: 128px;
  height: 128px;
  position: absolute;
  bottom: 80px;
  background-size: cover;
  image-rendering: pixelated;
}

#player {
  left: 80px;
  background: red; /* fallback */
  background-image: url("assets/player_spritesheet.png");
}

#enemy {
  right: 80px;
  background: blue; /* fallback */
}

/* ===== UI ===== */
#stats {
  border-bottom: 1px solid #333;
  padding-bottom: 10px;
}

#buttons button {
  width: 100%;
  margin-top: 6px;
  padding: 8px;
  background: #222;
  color: #fff;
  border: 1px solid #555;
  cursor: pointer;
}

#buttons button:hover {
  background: crimson;
}

#log {
  flex: 1;
  margin-top: 10px;
  background: #111;
  padding: 5px;
  overflow-y: auto;
  font-size: 13px;
}

footer {
  position: fixed;
  bottom: 6px;
  right: 10px;
  font-size: 12px;
  color: #aaa;
}
</style>
</head>

<body>

<div id="game">
  <div id="battle">
    <div id="player"></div>
    <div id="enemy"></div>
  </div>

  <div id="ui">
    <div id="stats">
      ‚ù§Ô∏è HP: <span id="hp"></span><br>
      üîÆ MP: <span id="mp"></span><br>
      ‚≠ê LVL: <span id="lvl"></span><br>
      üí∞ Gold: <span id="gold"></span>
    </div>

    <div id="buttons">
      <button onclick="attack()">Attack</button>
      <button onclick="magic()">Magic</button>
      <button onclick="heal()">Heal</button>
    </div>

    <div id="log"></div>
  </div>
</div>

<footer>
  Dev: Rey | TikTok: @reyysaiko | Tunggu kelanjutan updatenya boss üòè
</footer>

<script>
/* ===== GAME STATE ===== */
const player = {
  hp: 100,
  mp: 50,
  level: 1,
  gold: 0,
  atk: 10,
  mag: 15
};

let enemy = {};
let px = 80;
let py = 80;

/* ===== DOM ===== */
const playerEl = document.getElementById("player");
const enemyEl = document.getElementById("enemy");
const logDiv = document.getElementById("log");

const hp = document.getElementById("hp");
const mp = document.getElementById("mp");
const lvl = document.getElementById("lvl");
const gold = document.getElementById("gold");

/* ===== UTIL ===== */
function log(msg) {
  logDiv.innerHTML += msg + "<br>";
  logDiv.scrollTop = logDiv.scrollHeight;
}

function updateStats() {
  hp.textContent = player.hp;
  mp.textContent = player.mp;
  lvl.textContent = player.level;
  gold.textContent = player.gold;
}

/* ===== ENEMY ===== */
function spawnEnemy() {
  const list = [
    { name: "Slime", hp: 40, atk: 5, img: "assets/slime.png" },
    { name: "Goblin", hp: 70, atk: 8, img: "assets/goblin.png" },
    { name: "Wolf", hp: 90, atk: 12, img: "assets/wolf.png" }
  ];
  enemy = list[Math.floor(Math.random() * list.length)];
  enemyEl.style.backgroundImage = `url('${enemy.img}')`;
  log("üëæ " + enemy.name + " muncul!");
}

/* ===== PLAYER MOVE (WASD) ===== */
document.addEventListener("keydown", e => {
  const step = 12;
  if (e.key === "a") px -= step;
  if (e.key === "d") px += step;
  if (e.key === "w") py += step;
  if (e.key === "s") py -= step;

  if (px < 0) px = 0;
  if (py < 0) py = 0;

  playerEl.style.left = px + "px";
  playerEl.style.bottom = py + "px";
});

/* ===== COMBAT ===== */
function attack() {
  enemy.hp -= player.atk;
  log("üó°Ô∏è Attack -" + player.atk);
  if (enemy.hp <= 0) {
    log("üíÄ Musuh mati!");
    player.gold += 10;
    spawnEnemy();
  } else {
    enemyTurn();
  }
  updateStats();
}

function magic() {
  if (player.mp < 10) {
    log("‚ùå MP kurang");
    return;
  }
  player.mp -= 10;
  enemy.hp -= player.mag;
  log("üî• Magic -" + player.mag);
  if (enemy.hp <= 0) spawnEnemy();
  else enemyTurn();
  updateStats();
}

function heal() {
  if (player.mp < 10) {
    log("‚ùå MP kurang");
    return;
  }
  player.mp -= 10;
  player.hp += 20;
  if (player.hp > 100) player.hp = 100;
  log("üíä Heal +20");
  updateStats();
}

function enemyTurn() {
  player.hp -= enemy.atk;
  log("üëø Musuh nyerang -" + enemy.atk);
  if (player.hp <= 0) log("‚ò†Ô∏è LO MATI");
}

/* ===== INIT ===== */
spawnEnemy();
updateStats();
log("üî• RPG Savage V4 START üî•");
</script>

</body>
</html>
